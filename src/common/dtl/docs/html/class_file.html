<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>dtl: File类参考</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">dtl
   &#160;<span id="projectnumber">1.0.7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 制作者 Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li class="current"><a href="annotated.html"><span>类</span></a></li>
      <li><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>组合类型列表</span></a></li>
      <li><a href="hierarchy.html"><span>类继承关系</span></a></li>
      <li><a href="functions.html"><span>组合类型成员</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>类</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>文件</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>类型定义</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>枚举</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>枚举值</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>友元</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>宏定义</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">公有成员</a>  </div>
  <div class="headertitle">
<div class="title">File类参考</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
类File继承关系图：</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_file.png" usemap="#File_map" alt=""/>
  <map id="File_map" name="File_map">
<area href="class_base_file.html" alt="BaseFile" shape="rect" coords="0,0,61,24"/>
</map>
 </div></div>

<p><a href="class_file-members.html">所有成员的列表。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
公有成员</h2></td></tr>
<tr class="memitem:a16db856f86e88bbb7150b17a5fdaf957"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a16db856f86e88bbb7150b17a5fdaf957">copy</a> (const <a class="el" href="class_string.html">String</a> &amp;newFileName, bool failIfExists)</td></tr>
<tr class="memitem:a28cdee4aec72b12c79d52ad5e110f273"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a28cdee4aec72b12c79d52ad5e110f273">create</a> (void)</td></tr>
<tr class="memitem:a77f3e1813fa0bccf3d11f81865374c23"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a77f3e1813fa0bccf3d11f81865374c23">exists</a> (void) const </td></tr>
<tr class="memitem:a9c3c22080f541134fc827bd72d9e0955"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a9c3c22080f541134fc827bd72d9e0955">File</a> (const <a class="el" href="class_string.html">String</a> &amp;fileName)</td></tr>
<tr class="memitem:a40591bb317b11769049b9b4e68731375"><td class="memItemLeft" align="right" valign="top">int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a40591bb317b11769049b9b4e68731375">getLength</a> (void) const </td></tr>
<tr class="memitem:a7fb21a555214c212afe5b2cb12da6d9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_string.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a7fb21a555214c212afe5b2cb12da6d9b">getName</a> (void) const </td></tr>
<tr class="memitem:a65739f6077e2f2b50abecb2cd2eb05a6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a65739f6077e2f2b50abecb2cd2eb05a6">isReadonly</a> (void) const </td></tr>
<tr class="memitem:a8bed076c061764629a836b93adb87ee9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a8bed076c061764629a836b93adb87ee9">remove</a> (void)</td></tr>
<tr class="memitem:a75fdbda5ba19eb731cdddcf1b8c84d44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a75fdbda5ba19eb731cdddcf1b8c84d44">rename</a> (const <a class="el" href="class_string.html">String</a> &amp;newName)</td></tr>
<tr class="memitem:a44ae6ad13a180fa43836d5e7c695b161"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a44ae6ad13a180fa43836d5e7c695b161">setReadonly</a> (bool readonly)</td></tr>
<tr class="memitem:a11a828ede427df9bc35f2b5d939e23a9"><td class="memItemLeft" align="right" valign="top">int64&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_file.html#a11a828ede427df9bc35f2b5d939e23a9">truncate</a> (const int64 &amp;newLength)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>详细描述</h2>
<div class="textblock"><p>This class represents a 32-bit signed int type. </p>

<p>在文件<a class="el" href="file_8h_source.html">file.h</a>第<a class="el" href="file_8h_source.html#l00029">29</a>行定义。</p>
</div><hr/><h2>构造及析构函数文档</h2>
<a class="anchor" id="a9c3c22080f541134fc827bd72d9e0955"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_file.html#a9c3c22080f541134fc827bd72d9e0955">File::File</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_string.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>fileName</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="file_8h_source.html">file.h</a>第<a class="el" href="file_8h_source.html#l00032">32</a>行定义。</p>
<div class="fragment"><pre class="fragment">                  : <a class="code" href="class_base_file.html#a2c9ae069235cbfd5783d1708a5bd0156">BaseFile</a> (fileName)
         {        
         }
</pre></div>
</div>
</div>
<hr/><h2>成员函数文档</h2>
<a class="anchor" id="a16db856f86e88bbb7150b17a5fdaf957"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_file.html#a16db856f86e88bbb7150b17a5fdaf957">File::copy</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_string.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>newFileName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>failIfExists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="params"><dt><b>参数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">newFileName</td><td>specifies the name of the new file. </td></tr>
    <tr><td class="paramname">failIfExists</td><td>If this parameter is TRUE and the new file specified by newFileName already exists, the function fails. If this parameter is FALSE and the new file already exists, the function overwrites the existing file and succeeds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>异常:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>if any IO errors occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00133">133</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordflow">if</span> (::CopyFile (<a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a>.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> (), 
                                             newFileName.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> (), 
                                             failIfExists) == FALSE) 
                  <a class="code" href="exception_8h.html#a79876a73c0e219f35398fd5b65366ef3">THROW_ID</a> (<span class="stringliteral">&quot;copy file failed&quot;</span>, ::GetLastError ());
}
</pre></div>
</div>
</div>
<a class="anchor" id="a28cdee4aec72b12c79d52ad5e110f273"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_file.html#a28cdee4aec72b12c79d52ad5e110f273">File::create</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates this file.</p>
<dl class="exception"><dt><b>异常:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>if the file already exists or other IO errors occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00113">113</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordtype">void</span>* ret = ::CreateFile (<a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a>.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> (),
                                                                  GENERIC_WRITE | GENERIC_READ, 
                                                                  0,
                                                                  0,
                                                                  CREATE_NEW,
                                                                  FILE_ATTRIBUTE_NORMAL,
                                                                  0);
         <span class="keywordflow">if</span>(ret == INVALID_HANDLE_VALUE) {
                  <a class="code" href="exception_8h.html#a79876a73c0e219f35398fd5b65366ef3">THROW_ID</a> (<span class="stringliteral">&quot;create file failed&quot;</span>, ::GetLastError ());
         }
         
         ::CloseHandle (ret);
         <a class="code" href="class_base_file.html#adea3b1a6945e5762d53cf0444c0e756b">_needLoad</a> = <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a77f3e1813fa0bccf3d11f81865374c23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_file.html#a77f3e1813fa0bccf3d11f81865374c23">File::exists</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Gets a value indicating whether the file exists.</p>
<dl class="section return"><dt>返回:</dt><dd>true if the file exists; false if the file does not exist or if the file is a directory. </dd></dl>

<p>实现了<a class="el" href="class_base_file.html#a403e3b3061f5e3c5bf26c507171cf215">BaseFile</a>。</p>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00039">39</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordflow">if</span> (<a class="code" href="class_base_file.html#adea3b1a6945e5762d53cf0444c0e756b">_needLoad</a>) {
                  <span class="keyword">const_cast&lt;</span><a class="code" href="class_file.html">File</a>*<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code" href="class_base_file.html#a8130535d7996d9a513c4c06e16032f0f">loadFileAttrs</a> ();
         }

         <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490d">FileAttributes</a> attrs = <a class="code" href="class_base_file.html#a1ee1940ff48ac04bdbe232be0c9e6596">_data</a>-&gt;<a class="code" href="struct_base_file_1_1_file_data.html#a22d5a49251ba4c0ab96842ee6dd386e1">attrs</a>;
         <span class="keywordflow">return</span> (attrs == <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490da70acceabf0596e472ffd21a96aa52615">INVALID_FILE</a> ? <span class="keyword">false</span> : (attrs &amp; <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490da9d09f58160b1161920aad19080f568cc">DIRECTORY</a>) != 0 ? <span class="keyword">false</span> : <span class="keyword">true</span>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a40591bb317b11769049b9b4e68731375"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64 <a class="el" href="class_file.html#a40591bb317b11769049b9b4e68731375">File::getLength</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the length in bytes of this file.</p>
<dl class="section return"><dt>返回:</dt><dd>The length in bytes of this file, or zero if it doesn't exist. </dd></dl>

<p>在文件<a class="el" href="file_8h_source.html">file.h</a>第<a class="el" href="file_8h_source.html#l00043">43</a>行定义。</p>
<div class="fragment"><pre class="fragment">         {
                  <span class="keywordflow">if</span> (<a class="code" href="class_file.html#a77f3e1813fa0bccf3d11f81865374c23">exists</a> () == <span class="keyword">false</span>) 
                           <span class="keywordflow">return</span> 0;                           

                  <span class="keywordflow">return</span> <a class="code" href="class_base_file.html#a1ee1940ff48ac04bdbe232be0c9e6596">_data</a>-&gt;<a class="code" href="struct_base_file_1_1_file_data.html#a39849c339eaccfdf87ac6241128901e2">length</a>;
         }
</pre></div>
</div>
</div>
<a class="anchor" id="a7fb21a555214c212afe5b2cb12da6d9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_string.html">String</a> <a class="el" href="class_file.html#a7fb21a555214c212afe5b2cb12da6d9b">File::getName</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the name of the file denoted by this abstract pathname. </p>

<p>实现了<a class="el" href="class_base_file.html#a6ef8104ba66338666ad292224c4afce2">BaseFile</a>。</p>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00053">53</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordflow">return</span> <a class="code" href="class_path.html#a462f1b559c98d2db871fe6047f83f270">Path::getFileName</a> (this-&gt;<a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a>);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a65739f6077e2f2b50abecb2cd2eb05a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_file.html#a65739f6077e2f2b50abecb2cd2eb05a6">File::isReadonly</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const<code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Check the file whether or not be readonly</p>
<dl class="section return"><dt>返回:</dt><dd>false if the file not be readonly or doesn't exist. </dd></dl>

<p>在文件<a class="el" href="file_8h_source.html">file.h</a>第<a class="el" href="file_8h_source.html#l00056">56</a>行定义。</p>
<div class="fragment"><pre class="fragment">         {
                  <span class="keywordflow">if</span> (<a class="code" href="class_file.html#a77f3e1813fa0bccf3d11f81865374c23">exists</a> () == <span class="keyword">false</span>) 
                           <span class="keywordflow">return</span> <span class="keyword">false</span>;

                  <span class="keywordflow">return</span> ((<a class="code" href="class_base_file.html#a1ee1940ff48ac04bdbe232be0c9e6596">_data</a>-&gt;<a class="code" href="struct_base_file_1_1_file_data.html#a22d5a49251ba4c0ab96842ee6dd386e1">attrs</a> &amp; <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490da626af06d585fcb18d2cd6cdec0d235cf">READONLY</a>) != 0);
         }
</pre></div>
</div>
</div>
<a class="anchor" id="a8bed076c061764629a836b93adb87ee9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_file.html#a8bed076c061764629a836b93adb87ee9">File::remove</a> </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This method deletes an existing file, if the file doesn't exist, don't throw exception.</p>
<dl class="exception"><dt><b>异常:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>if any IO errors occur </td></tr>
  </table>
  </dd>
</dl>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00061">61</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordtype">int</span> ret=unlink(this-&gt;<a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a>.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> ());
         
         <span class="keywordflow">if</span>(ret != 0) {
                  <a class="code" href="exception_8h.html#aa9dcf1f190d09192bac2a56a331061a1">THROW</a> (strerror(errno));
         }
         <span class="keywordflow">else</span>
                  <a class="code" href="class_base_file.html#adea3b1a6945e5762d53cf0444c0e756b">_needLoad</a> = <span class="keyword">true</span>; <span class="comment">// Mark this as true to reload its attributes.</span>
}
</pre></div>
</div>
</div>
<a class="anchor" id="a75fdbda5ba19eb731cdddcf1b8c84d44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_file.html#a75fdbda5ba19eb731cdddcf1b8c84d44">File::rename</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_string.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>newName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Renames this file with the new file name.</p>
<dl class="params"><dt><b>参数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">newName</td><td>The new file name specified to rename.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>异常:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">ArgumentException</td><td>If the new file name is incorrect. </td></tr>
    <tr><td class="paramname">IOException</td><td>if any IO errors occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00089">89</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordflow">if</span> (newName.<a class="code" href="class_string.html#a2e3f864b93892db8d733374c99c63e8c">isEmpty</a> ())
                  <a class="code" href="exception_8h.html#aa9dcf1f190d09192bac2a56a331061a1">THROW</a> (<span class="stringliteral">&quot;IDS_EMPTY_NEW_NAME&quot;</span>);
         
         <a class="code" href="class_string.html">String</a> tempName = newName;
         <span class="keywordflow">if</span> (tempName.<a class="code" href="class_string.html#a645d15bb22853e7859aceb01b5d3858f">trim</a> ().<a class="code" href="class_string.html#a2e3f864b93892db8d733374c99c63e8c">isEmpty</a> () || 
                  <a class="code" href="class_path.html#aa4089fd3e8ebfb872b87c13fb34b18aa">Path::isValidPath</a> (tempName) == <span class="keyword">false</span>)
                  <a class="code" href="exception_8h.html#aa9dcf1f190d09192bac2a56a331061a1">THROW</a> (<span class="stringliteral">&quot;IDS_ILLEGAL_PATH&quot;</span>);

         <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490d">FileAttributes</a> attrs = <a class="code" href="class_base_file.html#a5c056edb895d7f7f49bb421d88a91178">BaseFile::getFileAttrs</a> (newName);
         <span class="keywordflow">if</span> (attrs != <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490da70acceabf0596e472ffd21a96aa52615">INVALID_FILE</a>) {
                  <a class="code" href="class_string.html">String</a> errMsg;             
                  <a class="code" href="exception_8h.html#aa9dcf1f190d09192bac2a56a331061a1">THROW</a> (errMsg);
         }
         
         <span class="keywordflow">if</span> (::MoveFile (<a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a>.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> (), newName.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> ()) == FALSE)
                  <a class="code" href="exception_8h.html#aa9dcf1f190d09192bac2a56a331061a1">THROW</a> (<span class="stringliteral">&quot;move file error&quot;</span>);          

         <a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a> = <a class="code" href="class_path.html#a2b2ae8f9745f04455a8490bf147cf80d">Path::makeFullPath</a> (newName);
         <a class="code" href="class_base_file.html#adea3b1a6945e5762d53cf0444c0e756b">_needLoad</a> = <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a44ae6ad13a180fa43836d5e7c695b161"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_file.html#a44ae6ad13a180fa43836d5e7c695b161">File::setReadonly</a> </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>readonly</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set file read-only attribute as be readonly</p>
<dl class="params"><dt><b>参数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">readonly</td><td>The new read-only flag for this file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>异常:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>if I/O error occurred. </td></tr>
  </table>
  </dd>
</dl>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00074">74</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordtype">int</span> <a class="code" href="lock_8cpp.html#a857e6704f8bd64cf25dd3a6d9608b30c">attr</a> = (int) <a class="code" href="class_base_file.html#a5c056edb895d7f7f49bb421d88a91178">getFileAttrs</a> ();

         <span class="keywordflow">if</span> (readonly == <span class="keyword">true</span>)
                  attr |= <a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490da626af06d585fcb18d2cd6cdec0d235cf">READONLY</a>;
         <span class="keywordflow">else</span>
                  attr &amp;= ~<a class="code" href="comdef_8h.html#a455a8b0435bc093ae97e1e6475b4490da626af06d585fcb18d2cd6cdec0d235cf">READONLY</a>;

         <a class="code" href="class_base_file.html#a04e94ae9294ee05744535855dce1a250">setFileAttrs</a> (attr);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a11a828ede427df9bc35f2b5d939e23a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64 <a class="el" href="class_file.html#a11a828ede427df9bc35f2b5d939e23a9">File::truncate</a> </td>
          <td>(</td>
          <td class="paramtype">const int64 &amp;&#160;</td>
          <td class="paramname"><em>newLength</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Truncates the file length to the new length. If the file doesn't exist or its length is less than the new length, this method do nothing.</p>
<dl class="params"><dt><b>参数:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">newLength</td><td>The new length to after truncating.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>异常:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td>if any IO errors occurred. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回:</dt><dd>The new length of the file. If the file doesn't exist, return 0. </dd></dl>

<p>在文件<a class="el" href="file_8cpp_source.html">file.cpp</a>第<a class="el" href="file_8cpp_source.html#l00143">143</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordflow">if</span> (<a class="code" href="class_file.html#a77f3e1813fa0bccf3d11f81865374c23">exists</a> () == <span class="keyword">false</span>)
                  <span class="keywordflow">return</span> 0;
                  
         <span class="keywordflow">if</span> (<a class="code" href="class_file.html#a40591bb317b11769049b9b4e68731375">getLength</a> () &lt;= newLength)
                  <span class="keywordflow">return</span> <a class="code" href="class_file.html#a40591bb317b11769049b9b4e68731375">getLength</a> ();
                  
         <span class="keywordtype">void</span>* file  = ::CreateFile (<a class="code" href="class_base_file.html#a289640e9e2f6517d3257d253f0420097">_fullPath</a>.<a class="code" href="class_string.html#adbaf0ff1f9639127e5de309e3ad15b23">getCStr</a> (), 
                                                                         GENERIC_READ | GENERIC_WRITE, 
                                                                         0, 
                                                                         0,
                                                                         OPEN_EXISTING,
                                                                         0,
                                                                         0);
                                               
         <span class="keywordflow">if</span> (file == INVALID_HANDLE_VALUE) {
                  <a class="code" href="exception_8h.html#a79876a73c0e219f35398fd5b65366ef3">THROW_ID</a> (<span class="stringliteral">&quot;create file failed&quot;</span>, ::GetLastError ());            
         }        
         
         <span class="keywordtype">int</span> lowLength = (int) (newLength &amp; 0xFFFFFFFF);
         <span class="keywordtype">int</span> hiLength= (int) (newLength &gt;&gt; 32);
         lowLength = ::SetFilePointer (file, 
                                                                          lowLength, <span class="comment">// Low-order 32 bits length</span>
                                                                          TO_LONG_PTR(&amp;hiLength),  <span class="comment">// high-order 32 bits length</span>
                                                                          FILE_BEGIN);
         <span class="keywordflow">if</span> ((<span class="keywordtype">unsigned</span>)lowLength == INVALID_SET_FILE_POINTER) {
                  ::CloseHandle (file);
                  <a class="code" href="exception_8h.html#a79876a73c0e219f35398fd5b65366ef3">THROW_ID</a>(<span class="stringliteral">&quot;SetFilePointer failed&quot;</span>, ::GetLastError ());
         }
         int64 realLength = (lowLength | ((int64)hiLength &lt;&lt; 32));
         
         <span class="keywordflow">if</span> (::SetEndOfFile (file) == FALSE) {                 
                  ::CloseHandle (file);
                  <a class="code" href="exception_8h.html#a79876a73c0e219f35398fd5b65366ef3">THROW_ID</a> (<span class="stringliteral">&quot;SetEndOfFile failed&quot;</span>, ::GetLastError ());
         }
         
         ::CloseHandle (file);
         <a class="code" href="class_base_file.html#adea3b1a6945e5762d53cf0444c0e756b">_needLoad</a> = <span class="keyword">true</span>;
         <span class="keywordflow">return</span> realLength;
}</pre></div>
</div>
</div>
<hr/>该类的文档由以下文件生成：<ul>
<li>E:/code/trunk/src/common/dtl/io/<a class="el" href="file_8h_source.html">file.h</a></li>
<li>E:/code/trunk/src/common/dtl/io/<a class="el" href="file_8cpp_source.html">file.cpp</a></li>
</ul>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated at 2012年七月18日 星期三 15:05:46 for dtl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
