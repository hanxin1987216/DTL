<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>dtl: E:/code/trunk/src/common/dtl/sys/dateformat.cpp文件参考</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">dtl
   &#160;<span id="projectnumber">1.0.7</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- 制作者 Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'搜索');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>文件列表</span></a></li>
      <li><a href="globals.html"><span>文件成员</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>全部</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>类</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>文件</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>函数</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>变量</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>类型定义</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>枚举</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>枚举值</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>友元</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>宏定义</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="header">
  <div class="summary">
<a href="#define-members">宏定义</a> &#124;
<a href="#enum-members">枚举</a> &#124;
<a href="#func-members">函数</a> &#124;
<a href="#var-members">变量</a>  </div>
  <div class="headertitle">
<div class="title">E:/code/trunk/src/common/dtl/sys/dateformat.cpp文件参考</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="dateformat_8cpp_source.html">浏览该文件的源代码。</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:a394cd8b79f9e4e1ddaba1c24801ab410"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a394cd8b79f9e4e1ddaba1c24801ab410">INTEGER_BUF_LEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="memitem:adeb07a5e4da401fa6293ad21dde3a824"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#adeb07a5e4da401fa6293ad21dde3a824">NO_DIGIT</a>&#160;&#160;&#160;num_parsed = -1; return 0</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
枚举</h2></td></tr>
<tr class="memitem:a4c133433395522c1458c43688265c377"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377">PatternKind</a> { <a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a2946aa8b11d7c6de06069977af81bb7a">PK_TIME</a>, 
<a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a3b943166ae4ec889b5fb30e2b5be2402">PK_DATE</a>, 
<a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a0c74d4723d919db333e589c6312c1737">PK_FULL</a>
 }</td></tr>
<tr class="memitem:a2f105a0eccf4bdf68688764d569dcf14"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14">PatternStringIndex</a> { <br/>
&#160;&#160;<a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14ac92952d4d190b14576deb95fc455420a">SHORT_TIME</a>, 
<a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14aae7bd5d2b2dcd912fb9a4a53635f0419">LONG_TIME</a>, 
<a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15">SHORT_DATE</a>, 
<a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>, 
<br/>
&#160;&#160;<a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a3421dd8aaa65527fa89169fae5508960">MONTH_DAY</a>, 
<a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a2de6c5be00b7b8c4624093d02422194b">YEAR_MONTH</a>
<br/>
 }</td></tr>
<tr class="memitem:a1089e334307f34f2df7b225f787f6774"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774">TimeIndicatorStringIndex</a> { <a class="el" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774ab677b4c7a6d6ec70f40f61c0ee945dd9">AM_INDEX</a>, 
<a class="el" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774a7ffba39f6464fa8ad03169a738f2ea1e">PM_INDEX</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:a1be532fcc90375f3e516c51e9f0035b7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a1be532fcc90375f3e516c51e9f0035b7">count_repeat</a> (const tchar_t *fmt, size_t size, size_t p, tchar_t ch)</td></tr>
<tr class="memitem:a0c80c9879e3d98e1b97c8b2cadf1d038"><td class="memItemLeft" align="right" valign="top">const DateStringLocator *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a0c80c9879e3d98e1b97c8b2cadf1d038">getDateLocator</a> (const <a class="el" href="class_locale.html">Locale</a> *locale)</td></tr>
<tr class="memitem:aff3890af2de68a3b819252db88877602"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_string.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (const wchar_t *wchar)</td></tr>
<tr class="memitem:ad694a8ea50194d37e78715e96ad1d1b0"><td class="memItemLeft" align="right" valign="top">static const wchar_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#ad694a8ea50194d37e78715e96ad1d1b0">getLocaleMonth</a> (const <a class="el" href="class_locale.html">Locale</a> *locale, unsigned int month, bool is_abb)</td></tr>
<tr class="memitem:aea2734bd5dc33d2f322d3e9e8957a5fb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_string.html">String</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#aea2734bd5dc33d2f322d3e9e8957a5fb">getLocalePattern</a> (const <a class="el" href="class_locale.html">Locale</a> *locale, <a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377">PatternKind</a> kind, int pattern)</td></tr>
<tr class="memitem:a846b8a75d071eb6fcc51698092b85253"><td class="memItemLeft" align="right" valign="top">static const wchar_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a846b8a75d071eb6fcc51698092b85253">getLocaleWeekDay</a> (const <a class="el" href="class_locale.html">Locale</a> *locale, unsigned int day, bool is_abb)</td></tr>
<tr class="memitem:ac5b0e9a457e274d1c0ddb18bddc8e924"><td class="memItemLeft" align="right" valign="top">static const wchar_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#ac5b0e9a457e274d1c0ddb18bddc8e924">getTimeIndicator</a> (const <a class="el" href="class_locale.html">Locale</a> *locale, bool is_am)</td></tr>
<tr class="memitem:ae116ea5f0f698070c0cf928cc59025f8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#ae116ea5f0f698070c0cf928cc59025f8">parse_number</a> (const tchar_t *str, size_t count, int digits, bool leadingzero, bool next_not_digit, int &amp;num_parsed)</td></tr>
<tr class="memitem:aa4e8e9987c8aa592534987e43a9b8892"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#aa4e8e9987c8aa592534987e43a9b8892">result_pad</a> (<a class="el" href="class_string.html">String</a> &amp;output, unsigned int digits, bool padding)</td></tr>
<tr class="memitem:a880eb7ab61bf888d88dc20273077e319"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a880eb7ab61bf888d88dc20273077e319">systemTimeToTimeExpr</a> (DateTimeExpr *te, const SYSTEMTIME *tm)</td></tr>
<tr class="memitem:acf91b2a33840a5a3d7859f189dfa6d94"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#acf91b2a33840a5a3d7859f189dfa6d94">timeToTimeExprWin32</a> (const int64 &amp;epoch, struct DateTimeExpr *te)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
变量</h2></td></tr>
<tr class="memitem:aae4d11abc14dc42a2eb4a9ee0222ab8f"><td class="memItemLeft" align="right" valign="top">const DateStringLocator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#aae4d11abc14dc42a2eb4a9ee0222ab8f">dateLocator</a> []</td></tr>
<tr class="memitem:a9d3a0e68bcc16a7b986e6c042199e53d"><td class="memItemLeft" align="right" valign="top">const wchar_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> []</td></tr>
<tr class="memitem:ace96ba40eab3641b2ae0e1bdefc359e4"><td class="memItemLeft" align="right" valign="top">static const unsigned char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#ace96ba40eab3641b2ae0e1bdefc359e4">pattern_table_map</a> [900]</td></tr>
<tr class="memitem:abc45abb6e183be802c594094c8bc7573"><td class="memItemLeft" align="right" valign="top">const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dateformat_8cpp.html#abc45abb6e183be802c594094c8bc7573">usecPerSec</a> = 1000000</td></tr>
</table>
<hr/><h2>宏定义文档</h2>
<a class="anchor" id="a394cd8b79f9e4e1ddaba1c24801ab410"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="dateformat_8cpp.html#a394cd8b79f9e4e1ddaba1c24801ab410">INTEGER_BUF_LEN</a>&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00318">318</a>行定义。</p>

</div>
</div>
<a class="anchor" id="adeb07a5e4da401fa6293ad21dde3a824"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define <a class="el" href="dateformat_8cpp.html#adeb07a5e4da401fa6293ad21dde3a824">NO_DIGIT</a>&#160;&#160;&#160;num_parsed = -1; return 0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00727">727</a>行定义。</p>

</div>
</div>
<hr/><h2>枚举类型文档</h2>
<a class="anchor" id="a4c133433395522c1458c43688265c377"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377">PatternKind</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>枚举值: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a4c133433395522c1458c43688265c377a2946aa8b11d7c6de06069977af81bb7a"></a>PK_TIME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4c133433395522c1458c43688265c377a3b943166ae4ec889b5fb30e2b5be2402"></a>PK_DATE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a4c133433395522c1458c43688265c377a0c74d4723d919db333e589c6312c1737"></a>PK_FULL</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00288">288</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <a class="code" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a2946aa8b11d7c6de06069977af81bb7a">PK_TIME</a>,
         <a class="code" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a3b943166ae4ec889b5fb30e2b5be2402">PK_DATE</a>,
         <a class="code" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a0c74d4723d919db333e589c6312c1737">PK_FULL</a>
};       
</pre></div>
</div>
</div>
<a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14">PatternStringIndex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>枚举值: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14ac92952d4d190b14576deb95fc455420a"></a>SHORT_TIME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14aae7bd5d2b2dcd912fb9a4a53635f0419"></a>LONG_TIME</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15"></a>SHORT_DATE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1"></a>LONG_DATE</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14a3421dd8aaa65527fa89169fae5508960"></a>MONTH_DAY</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2f105a0eccf4bdf68688764d569dcf14a2de6c5be00b7b8c4624093d02422194b"></a>YEAR_MONTH</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00085">85</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14ac92952d4d190b14576deb95fc455420a">SHORT_TIME</a>,
         <a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14aae7bd5d2b2dcd912fb9a4a53635f0419">LONG_TIME</a>,
         <a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15">SHORT_DATE</a>,
         <a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>,
         <a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a3421dd8aaa65527fa89169fae5508960">MONTH_DAY</a>,
         <a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a2de6c5be00b7b8c4624093d02422194b">YEAR_MONTH</a>
};
</pre></div>
</div>
</div>
<a class="anchor" id="a1089e334307f34f2df7b225f787f6774"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774">TimeIndicatorStringIndex</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>枚举值: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a1089e334307f34f2df7b225f787f6774ab677b4c7a6d6ec70f40f61c0ee945dd9"></a>AM_INDEX</em>&nbsp;</td><td>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a1089e334307f34f2df7b225f787f6774a7ffba39f6464fa8ad03169a738f2ea1e"></a>PM_INDEX</em>&nbsp;</td><td>
</td></tr>
</table>
</dd>
</dl>

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00095">95</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <a class="code" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774ab677b4c7a6d6ec70f40f61c0ee945dd9">AM_INDEX</a>,
         <a class="code" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774a7ffba39f6464fa8ad03169a738f2ea1e">PM_INDEX</a>
};
</pre></div>
</div>
</div>
<hr/><h2>函数文档</h2>
<a class="anchor" id="a1be532fcc90375f3e516c51e9f0035b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="dateformat_8cpp.html#a1be532fcc90375f3e516c51e9f0035b7">count_repeat</a> </td>
          <td>(</td>
          <td class="paramtype">const tchar_t *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tchar_t&#160;</td>
          <td class="paramname"><em>ch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00357">357</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordtype">size_t</span> i = p + 1;
         <span class="keywordflow">while</span> ((i &lt; size) &amp;&amp; (fmt [i] == ch)) 
                  ++i;
         
         <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) (i - p);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a0c80c9879e3d98e1b97c8b2cadf1d038"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const DateStringLocator* <a class="el" href="dateformat_8cpp.html#a0c80c9879e3d98e1b97c8b2cadf1d038">getDateLocator</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_locale.html">Locale</a> *&#160;</td>
          <td class="paramname"><em>locale</em></td><td>)</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00254">254</a>行定义。</p>
<div class="fragment"><pre class="fragment">{        
         <span class="keywordtype">int</span> index = <a class="code" href="dateformat_8cpp.html#ace96ba40eab3641b2ae0e1bdefc359e4">pattern_table_map</a>[locale-&gt;<a class="code" href="class_locale.html#a9df627fe20dd5aa6077b1a31420946b6">getLocaleCode</a> ()];
         
         <span class="keywordflow">if</span>( index == 0xFF) {
                  locale = <a class="code" href="class_locale.html#ab49cb05b1828447808546dc5aaa0153c">Locale::getUSLocale</a> ();
                  index = <a class="code" href="dateformat_8cpp.html#ace96ba40eab3641b2ae0e1bdefc359e4">pattern_table_map</a>[locale-&gt;<a class="code" href="class_locale.html#a9df627fe20dd5aa6077b1a31420946b6">getLocaleCode</a> ()];
         }

         <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aae4d11abc14dc42a2eb4a9ee0222ab8f">dateLocator</a> + index;         
}
</pre></div>
</div>
</div>
<a class="anchor" id="aff3890af2de68a3b819252db88877602"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_string.html">String</a> <a class="el" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> </td>
          <td>(</td>
          <td class="paramtype">const wchar_t *&#160;</td>
          <td class="paramname"><em>wchar</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l01329">1329</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordtype">char</span>* charFmtPattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (wchar);
         <a class="code" href="class_string.html">String</a> result (charFmtPattern);
         g_free (charFmtPattern);
         <span class="keywordflow">return</span> result;
}
</pre></div>
</div>
</div>
<a class="anchor" id="ad694a8ea50194d37e78715e96ad1d1b0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const wchar_t * <a class="el" href="dateformat_8cpp.html#ad694a8ea50194d37e78715e96ad1d1b0">getLocaleMonth</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_locale.html">Locale</a> *&#160;</td>
          <td class="paramname"><em>locale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>month</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_abb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l01518">1518</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keyword">const</span> DateStringLocator* locator = <a class="code" href="dateformat_8cpp.html#a0c80c9879e3d98e1b97c8b2cadf1d038">getDateLocator</a> (locale);    

         <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>** months;

         <span class="keywordflow">if</span> (is_abb) 
                  months = (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>**) <a class="code" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> + 
                                                                                          locator-&gt;abbMonthIndex;
         <span class="keywordflow">else</span>
                  months = (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>**) <a class="code" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> + 
                                                                                          locator-&gt;fullMonthIndex;
                  
         <span class="keywordflow">return</span> months [month - 1];
}
</pre></div>
</div>
</div>
<a class="anchor" id="aea2734bd5dc33d2f322d3e9e8957a5fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_string.html">String</a> <a class="el" href="dateformat_8cpp.html#aea2734bd5dc33d2f322d3e9e8957a5fb">getLocalePattern</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_locale.html">Locale</a> *&#160;</td>
          <td class="paramname"><em>locale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377">PatternKind</a>&#160;</td>
          <td class="paramname"><em>kind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l01339">1339</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keyword">const</span> DateStringLocator* locator = <a class="code" href="dateformat_8cpp.html#a0c80c9879e3d98e1b97c8b2cadf1d038">getDateLocator</a> (locale);

         <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>** fmtPatterns = (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>**) (<a class="code" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> + 
                                                                                                                              locator-&gt;patternIndex);
         <span class="keywordflow">switch</span> (kind) {
         <span class="keywordflow">case</span> <a class="code" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a2946aa8b11d7c6de06069977af81bb7a">PK_TIME</a>:
                  <span class="keywordflow">if</span> (pattern == <a class="code" href="date_8h.html#a9f191cef912e3fdbe6f35d7aa39b2050a4fd462b93bbf175378b3caa6b42ca6f2">TP_SHORT</a>)
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14ac92952d4d190b14576deb95fc455420a">SHORT_TIME</a>];
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14ac92952d4d190b14576deb95fc455420a">SHORT_TIME</a>]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pattern == <a class="code" href="date_8h.html#a9f191cef912e3fdbe6f35d7aa39b2050aa20784767f4ce8384c5cff71bca6988b">TP_LONG</a>)
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14aae7bd5d2b2dcd912fb9a4a53635f0419">LONG_TIME</a>];
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14aae7bd5d2b2dcd912fb9a4a53635f0419">LONG_TIME</a>]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                  <span class="keywordflow">else</span> 
                           assert (<span class="keyword">false</span>);
                  <span class="keywordflow">break</span>;

         <span class="keywordflow">case</span> <a class="code" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a3b943166ae4ec889b5fb30e2b5be2402">PK_DATE</a>:
                  <span class="keywordflow">switch</span> (pattern) {
                  <span class="keywordflow">case</span> <a class="code" href="date_8h.html#a1d6871e7f575403099cc68638de9fb30aa95e3e197d1099f79b4fa95592c1646d">DP_SHORT</a>:
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15">SHORT_DATE</a>];
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15">SHORT_DATE</a>]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                  <span class="keywordflow">case</span> <a class="code" href="date_8h.html#a1d6871e7f575403099cc68638de9fb30a809476fe8a34d3a8de122c3dac0e347e">DP_LONG</a>:
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>];
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                  <span class="keywordflow">case</span> <a class="code" href="date_8h.html#a1d6871e7f575403099cc68638de9fb30ae88e0bcdf6f1abb3604ee5ecaf0fb1bf">DP_MONTH_DAY</a>:
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a3421dd8aaa65527fa89169fae5508960">MONTH_DAY</a>];
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a3421dd8aaa65527fa89169fae5508960">MONTH_DAY</a>]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>
                  <span class="keywordflow">case</span> <a class="code" href="date_8h.html#a1d6871e7f575403099cc68638de9fb30a818f6ae3bc6a69e3c6dd88242c9effd8">DP_YEAR_MONTH</a>:
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a2de6c5be00b7b8c4624093d02422194b">YEAR_MONTH</a>];
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keywordflow">return</span> <a class="code" href="dateformat_8cpp.html#aff3890af2de68a3b819252db88877602">getFmtPatternsChar</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a2de6c5be00b7b8c4624093d02422194b">YEAR_MONTH</a>]);
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                  }
                  assert (<span class="keyword">false</span>);
                  <span class="keywordflow">break</span>;

         <span class="keywordflow">case</span> <a class="code" href="dateformat_8cpp.html#a4c133433395522c1458c43688265c377a0c74d4723d919db333e589c6312c1737">PK_FULL</a>:
                  {
                  <span class="keywordflow">if</span> (pattern &gt; <a class="code" href="date_8h.html#ac6cce86321c85b03f460c556216f707ea734ed6ddc67379f12df261e0a491cef9">FD_GENERAL_FULL</a>)
                           assert (<span class="keyword">false</span>); <span class="comment">// still not impl.</span>

                  <span class="keywordflow">if</span> (pattern == <a class="code" href="date_8h.html#ac6cce86321c85b03f460c556216f707ea35f6584f2ed8d802d895184eb773b733">FD_GENERAL_SHORT</a>) {
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <a class="code" href="class_string.html">String</a> fullPattern = fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15">SHORT_DATE</a>];
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (_T(<span class="charliteral">&#39; &#39;</span>), 1);
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14ac92952d4d190b14576deb95fc455420a">SHORT_TIME</a>]);

                           <span class="keywordflow">return</span> fullPattern;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* portFmtPattern = fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a9fbaf96a86b266ad45c4b66b5e429c15">SHORT_DATE</a>];
                           <span class="keywordtype">char</span>* fpattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (portFmtPattern);
                           <a class="code" href="class_string.html">String</a> fullPattern (fpattern);
                           g_free (fpattern);

                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (_T(<span class="charliteral">&#39; &#39;</span>), 1);
                           fpattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (fmtPatterns[SHORT_TIME]);
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (fpattern);
                           g_free (fpattern);
                           
                           <span class="keywordflow">return</span> fullPattern;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                  }
                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pattern == <a class="code" href="date_8h.html#ac6cce86321c85b03f460c556216f707ea8ff7aff5354448fa141caf3c16f10393">FD_GENERAL_LONG</a>) {
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <a class="code" href="class_string.html">String</a> fullPattern = fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>];
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (_T(<span class="charliteral">&#39; &#39;</span>), 1);
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14aae7bd5d2b2dcd912fb9a4a53635f0419">LONG_TIME</a>]);

                           <span class="keywordflow">return</span> fullPattern;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* portFmtPattern = fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>];
                           <span class="keywordtype">char</span>* fpattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (portFmtPattern);
                           <a class="code" href="class_string.html">String</a> fullPattern (fpattern);
                           g_free (fpattern);

                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (_T(<span class="charliteral">&#39; &#39;</span>), 1);

                           fpattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (fmtPatterns[LONG_TIME]);
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (fpattern);
                           g_free (fpattern);
                           
                           <span class="keywordflow">return</span> fullPattern;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                  }
                  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pattern == <a class="code" href="date_8h.html#ac6cce86321c85b03f460c556216f707ea734ed6ddc67379f12df261e0a491cef9">FD_GENERAL_FULL</a>) {
<span class="preprocessor">#ifdef __WINDOWS__</span>
<span class="preprocessor"></span>                           <a class="code" href="class_string.html">String</a> fullPattern = fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>];
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (_T(<span class="charliteral">&#39; &#39;</span>), 1);
                           
                           <span class="comment">//</span>
                           <span class="comment">// The G format still not implement, by AnyBackup ask replace</span>
                           <span class="comment">// has used this format. In fact, it is meaningless to show the era.</span>
                           <span class="comment">// so we commented out the format.</span>
                           <span class="comment">// @hhf  2004-7-21</span>
                           <span class="comment">//</span>
                           <span class="comment">//full_pattern.append (_T(&quot; G &quot;)); //append era pattern</span>

                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (fmtPatterns[LONG_TIME]);

                           <span class="keywordflow">return</span> fullPattern;
<span class="preprocessor">#else</span>
<span class="preprocessor"></span>                           <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>* portFmtPattern = fmtPatterns[<a class="code" href="dateformat_8cpp.html#a2f105a0eccf4bdf68688764d569dcf14a17fb835139a5f7faa5720cd4b36afba1">LONG_DATE</a>];
                           <span class="keywordtype">char</span>* fpattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (portFmtPattern);
                           <a class="code" href="class_string.html">String</a> fullPattern (fpattern);
                           g_free (fpattern);

                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (_T(<span class="charliteral">&#39; &#39;</span>), 1);
                           fpattern = <a class="code" href="string_8cpp.html#af089c8d0dd00c5aea134187dcdbf212a">convertWcharToChar</a> (fmtPatterns[LONG_TIME]);
                           fullPattern.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (fpattern);
                           g_free (fpattern);

                           <span class="keywordflow">return</span> fullPattern;
<span class="preprocessor">#endif</span>
<span class="preprocessor"></span>                  }
                  
                  assert (<span class="keyword">false</span>);
                  }
         }

         <span class="keywordflow">return</span> <a class="code" href="class_string.html#af1d3a62617a33d790541c66409f5f048">String::EMPTY</a>;
}
</pre></div>
</div>
</div>
<a class="anchor" id="a846b8a75d071eb6fcc51698092b85253"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const wchar_t * <a class="el" href="dateformat_8cpp.html#a846b8a75d071eb6fcc51698092b85253">getLocaleWeekDay</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_locale.html">Locale</a> *&#160;</td>
          <td class="paramname"><em>locale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>day</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_abb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l01497">1497</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keyword">const</span> DateStringLocator* locator = <a class="code" href="dateformat_8cpp.html#a0c80c9879e3d98e1b97c8b2cadf1d038">getDateLocator</a> (locale);    

         <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>** weekDays;
         <span class="keywordflow">if</span> (is_abb) {
                  weekDays = (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>**) <a class="code" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> + 
                                                                                          locator-&gt;abbWeekIndex;
         }
         <span class="keywordflow">else</span> {
                  weekDays = (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>**) <a class="code" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> + 
                                                                                          locator-&gt;fullWeekIndex;
         }
         
         <span class="keywordflow">return</span> weekDays[day];
}
</pre></div>
</div>
</div>
<a class="anchor" id="ac5b0e9a457e274d1c0ddb18bddc8e924"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static const wchar_t * <a class="el" href="dateformat_8cpp.html#ac5b0e9a457e274d1c0ddb18bddc8e924">getTimeIndicator</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_locale.html">Locale</a> *&#160;</td>
          <td class="paramname"><em>locale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_am</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l01485">1485</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keyword">const</span> DateStringLocator* locator = <a class="code" href="dateformat_8cpp.html#a0c80c9879e3d98e1b97c8b2cadf1d038">getDateLocator</a> (locale);

         <span class="keyword">const</span> <span class="keywordtype">wchar_t</span>** timeIndicators = (<span class="keyword">const</span> <span class="keywordtype">wchar_t</span>**) <a class="code" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a> + 
                                                                                                                              locator-&gt;timeIndicatorIndex;

         <span class="keywordtype">int</span> index = is_am ? <a class="code" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774ab677b4c7a6d6ec70f40f61c0ee945dd9">AM_INDEX</a> : <a class="code" href="dateformat_8cpp.html#a1089e334307f34f2df7b225f787f6774a7ffba39f6464fa8ad03169a738f2ea1e">PM_INDEX</a>;
         <span class="keywordflow">return</span> timeIndicators[index];
}
</pre></div>
</div>
</div>
<a class="anchor" id="ae116ea5f0f698070c0cf928cc59025f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int <a class="el" href="dateformat_8cpp.html#ae116ea5f0f698070c0cf928cc59025f8">parse_number</a> </td>
          <td>(</td>
          <td class="paramtype">const tchar_t *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>leadingzero</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>next_not_digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int &amp;&#160;</td>
          <td class="paramname"><em>num_parsed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00730">730</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         <span class="keywordtype">int</span> number = 0, i;

         <span class="comment">// Parse the real digit count</span>
         <span class="keywordflow">if</span> (!leadingzero) {
                  <span class="keywordtype">int</span> real_digits = 0;
                  <span class="keywordflow">for</span> (i = 0; (size_t) i &lt; count &amp;&amp; i &lt; digits; i++) {
                           <span class="keywordflow">if</span> (!<a class="code" href="class_char.html#ab7ed41a88b3bde8deb05b34894da3df7">Char::isDigit</a> (str[i]))
                                    <span class="keywordflow">break</span>;

                           real_digits++;
                  }

                  digits = real_digits;
         }

         <span class="comment">// no enough </span>
         <span class="keywordflow">if</span> (count &lt; (<span class="keywordtype">size_t</span>) digits) {
                  <a class="code" href="dateformat_8cpp.html#adeb07a5e4da401fa6293ad21dde3a824">NO_DIGIT</a>;
         }

         <span class="keywordflow">if</span> (count &gt; (<span class="keywordtype">size_t</span>) digits &amp;&amp; next_not_digit &amp;&amp; <a class="code" href="class_char.html#ab7ed41a88b3bde8deb05b34894da3df7">Char::isDigit</a> (str[digits])) {
                  <span class="comment">// More digits left over </span>
                  <a class="code" href="dateformat_8cpp.html#adeb07a5e4da401fa6293ad21dde3a824">NO_DIGIT</a>;
         }

         <span class="keywordflow">for</span> (i = 0; i &lt; digits; i++) {
                  <span class="keywordtype">wchar_t</span> c = str[i];
                  <span class="keywordflow">if</span> (!<a class="code" href="class_char.html#ab7ed41a88b3bde8deb05b34894da3df7">Char::isDigit</a> (c)) {
                           <a class="code" href="dateformat_8cpp.html#adeb07a5e4da401fa6293ad21dde3a824">NO_DIGIT</a>;
                  }

                  number = number * 10 + (<span class="keywordtype">unsigned</span> int) (c - <span class="charliteral">&#39;0&#39;</span>);
         }

         <span class="comment">// successfully</span>
         num_parsed = digits;
         <span class="keywordflow">return</span> number;
}
</pre></div>
</div>
</div>
<a class="anchor" id="aa4e8e9987c8aa592534987e43a9b8892"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="dateformat_8cpp.html#aa4e8e9987c8aa592534987e43a9b8892">result_pad</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_string.html">String</a> &amp;&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>padding</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00367">367</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         tchar_t buf[<a class="code" href="dateformat_8cpp.html#a394cd8b79f9e4e1ddaba1c24801ab410">INTEGER_BUF_LEN</a>];
         <span class="keywordtype">int</span> len;

         <span class="keywordflow">if</span> (padding)
                  len = <a class="code" href="string_8h.html#a0b4ece39f6489c26c09f86ad06fd2f28">t_snwprintf</a> (buf, <a class="code" href="dateformat_8cpp.html#a394cd8b79f9e4e1ddaba1c24801ab410">INTEGER_BUF_LEN</a>, _T(<span class="stringliteral">&quot;0%u&quot;</span>), digits);
         <span class="keywordflow">else</span>
                  len = <a class="code" href="string_8h.html#a0b4ece39f6489c26c09f86ad06fd2f28">t_snwprintf</a> (buf, <a class="code" href="dateformat_8cpp.html#a394cd8b79f9e4e1ddaba1c24801ab410">INTEGER_BUF_LEN</a>, _T(<span class="stringliteral">&quot;%u&quot;</span>), digits);

         <span class="keywordflow">if</span> (len != -1)
                  output.<a class="code" href="class_string.html#a4849f0b933cbc812a292d06f79e12430">append</a> (buf, len);
}
</pre></div>
</div>
</div>
<a class="anchor" id="a880eb7ab61bf888d88dc20273077e319"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void <a class="el" href="dateformat_8cpp.html#a880eb7ab61bf888d88dc20273077e319">systemTimeToTimeExpr</a> </td>
          <td>(</td>
          <td class="paramtype">DateTimeExpr *&#160;</td>
          <td class="paramname"><em>te</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const SYSTEMTIME *&#160;</td>
          <td class="paramname"><em>tm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00382">382</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="date_8cpp.html#a720614103e4f5f0783b78a6121d4e165">dayoffset</a>[12] =
    {0, 31, 59, 90, 120, 151, 182, 212, 243, 273, 304, 334};

    <span class="comment">/* </span>
<span class="comment">          * Note; the caller is responsible for filling in detailed tm_usec,</span>
<span class="comment">     * tm_gmtoff and tm_isdst data when applicable.</span>
<span class="comment">     */</span>
    te-&gt;tm_usec = tm-&gt;wMilliseconds * 1000;
    te-&gt;tm_sec  = tm-&gt;wSecond;
    te-&gt;tm_min  = tm-&gt;wMinute;
    te-&gt;tm_hour = tm-&gt;wHour;
    te-&gt;tm_mday = tm-&gt;wDay;
    te-&gt;tm_mon  = tm-&gt;wMonth;
    te-&gt;tm_year = tm-&gt;wYear;
    te-&gt;tm_wday = tm-&gt;wDayOfWeek;
    te-&gt;tm_yday = dayoffset[te-&gt;tm_mon] + (tm-&gt;wDay - 1);
    te-&gt;tm_isdst = 0;
    te-&gt;tm_gmtoff = 0;

    <span class="comment">/* </span>
<span class="comment">          * If this is a leap year, and we&#39;re past the 28th of Feb. (the</span>
<span class="comment">     * 58th day after Jan. 1), we&#39;ll increment our tm_yday by one.</span>
<span class="comment">     */</span>
         <span class="keywordflow">if</span> (<a class="code" href="class_date.html#ae05dbf261aca66a60eed9e77a239199e">Date::isLeapYear</a> (tm-&gt;wYear) &amp;&amp; (te-&gt;tm_yday &gt; 58))
        te-&gt;tm_yday++;
}
</pre></div>
</div>
</div>
<a class="anchor" id="acf91b2a33840a5a3d7859f189dfa6d94"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static bool <a class="el" href="dateformat_8cpp.html#acf91b2a33840a5a3d7859f189dfa6d94">timeToTimeExprWin32</a> </td>
          <td>(</td>
          <td class="paramtype">const int64 &amp;&#160;</td>
          <td class="paramname"><em>epoch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct DateTimeExpr *&#160;</td>
          <td class="paramname"><em>te</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00412">412</a>行定义。</p>
<div class="fragment"><pre class="fragment">{
         SYSTEMTIME st;
    FILETIME ft;

         <span class="comment">// Convert epoch to FILETIME</span>
         <a class="code" href="comdef_8cpp.html#a39bd1a5bf7fae78ca9d7a46855ed2110">timeToFileTime</a> (&amp;ft, epoch);

    <span class="keywordflow">if</span> (::FileTimeToSystemTime (&amp;ft, &amp;st) == FALSE)
                  <span class="keywordflow">return</span> <span class="keyword">false</span>;

    <a class="code" href="dateformat_8cpp.html#a880eb7ab61bf888d88dc20273077e319">systemTimeToTimeExpr</a> (te, &amp;st);
    te-&gt;tm_usec = (<span class="keywordtype">unsigned</span> int) (epoch % <a class="code" href="dateformat_8cpp.html#abc45abb6e183be802c594094c8bc7573">usecPerSec</a>);

         <span class="comment">//TODO: gmt offset and is dst out of my way </span>
    <span class="comment">//te-&gt;tm_gmtoff = (unsigned int)time_sec(epoch) - (unsigned int)time_sec(epoch);</span>
         te-&gt;tm_gmtoff = 0;
    <span class="comment">/*</span>
<span class="comment">          * To compute the dst flag, we compare the expected </span>
<span class="comment">     * local (standard) timezone bias to the delta.</span>
<span class="comment">     * [Note, in war time or double daylight time the</span>
<span class="comment">     * resulting tm_isdst is, desireably, 2 hours]</span>
<span class="comment">     */</span>
    <span class="comment">//te-&gt;tm_isdst = (te-&gt;tm_gmtoff / 3600) - (-(tz.Bias + tz.StandardBias) / 60);</span>
         te-&gt;tm_isdst = 0;

         <span class="keywordflow">return</span> <span class="keyword">true</span>;
}
</pre></div>
</div>
</div>
<hr/><h2>变量文档</h2>
<a class="anchor" id="aae4d11abc14dc42a2eb4a9ee0222ab8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const DateStringLocator <a class="el" href="dateformat_8cpp.html#aae4d11abc14dc42a2eb4a9ee0222ab8f">dateLocator</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>初始化序列：</b><div class="fragment"><pre class="fragment"> 
{
         {1,               19,               26,               47,               59,               83}, 
         {7,               33,               33,               71,               71,               85}, 
         {13,     40,               40,               71,               71,               85}, 
         {13,     40,               40,               71,               71,               85}, 
         {13,     40,               40,               71,               71,               85}, 
         {1,               19,               26,               47,               59,               83}, 
         {87,     19,               26,               47,               59,               83}, 
}
</pre></div>
<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00119">119</a>行定义。</p>

</div>
</div>
<a class="anchor" id="a9d3a0e68bcc16a7b986e6c042199e53d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const wchar_t* <a class="el" href="dateformat_8cpp.html#a9d3a0e68bcc16a7b986e6c042199e53d">dateStringTable</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00130">130</a>行定义。</p>

</div>
</div>
<a class="anchor" id="ace96ba40eab3641b2ae0e1bdefc359e4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned char <a class="el" href="dateformat_8cpp.html#ace96ba40eab3641b2ae0e1bdefc359e4">pattern_table_map</a>[900]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00040">40</a>行定义。</p>

</div>
</div>
<a class="anchor" id="abc45abb6e183be802c594094c8bc7573"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned int <a class="el" href="dateformat_8cpp.html#abc45abb6e183be802c594094c8bc7573">usecPerSec</a> = 1000000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>在文件<a class="el" href="dateformat_8cpp_source.html">dateformat.cpp</a>第<a class="el" href="dateformat_8cpp_source.html#l00316">316</a>行定义。</p>

</div>
</div>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated at 2012年七月18日 星期三 15:05:44 for dtl by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
